# pp002JBJ_fastapi_web_oracle_es_py

# ğŸ“ í”„ë¡œì íŠ¸ ë””ë ‰í† ë¦¬ êµ¬ì¡°

```
pp002JBJ_fastapi_web_oracle_es_py/
â”‚
â”œâ”€â”€ ğŸ“„ main.py                      # FastAPI ë©”ì¸ ì• í”Œë¦¬ì¼€ì´ì…˜
â”œâ”€â”€ ğŸ“„ database.py                  # DB ì—°ê²° ì„¤ì •
â”œâ”€â”€ ğŸ“„ models.py                    # SQLAlchemy ëª¨ë¸
â”œâ”€â”€ ğŸ“„ schemas.py                   # Pydantic ìŠ¤í‚¤ë§ˆ
â”œâ”€â”€ ğŸ“„ auth.py                      # JWT ì¸ì¦ ìœ í‹¸ë¦¬í‹°
â”œâ”€â”€ ğŸ“„ member_router.py             # íšŒì› ë¼ìš°í„°
â”œâ”€â”€ ğŸ“„ email_router.py              # ì´ë©”ì¼ ë¼ìš°í„°
â”‚
â”œâ”€â”€ ğŸ“„ requirements.txt             # Python ì˜ì¡´ì„±
â”œâ”€â”€ ğŸ“„ Dockerfile                   # FastAPI ì»¨í…Œì´ë„ˆ ì„¤ì •
â”œâ”€â”€ ğŸ“„ docker-compose.yml           # Docker Compose ì„¤ì •
â”œâ”€â”€ ğŸ“„ .env                         # í™˜ê²½ ë³€ìˆ˜ (git ignore)
â”œâ”€â”€ ğŸ“„ .env.example                 # í™˜ê²½ ë³€ìˆ˜ ì˜ˆì‹œ
â”œâ”€â”€ ğŸ“„ .gitignore                   # Git ignore ì„¤ì •
â”œâ”€â”€ ğŸ“„ README.md                    # í”„ë¡œì íŠ¸ ë¬¸ì„œ
â”‚
â”œâ”€â”€ ğŸ“ init_scripts/                # DB ì´ˆê¸°í™” ìŠ¤í¬ë¦½íŠ¸
â”‚   â””â”€â”€ ğŸ“„ init.sql
â”‚
â”œâ”€â”€ ğŸ“ static/                      # í”„ë¡ íŠ¸ì—”ë“œ ì •ì  íŒŒì¼
â”‚   â”œâ”€â”€ ğŸ“„ index.html
â”‚   â”œâ”€â”€ ğŸ“„ login.html
â”‚   â”œâ”€â”€ ğŸ“„ signup.html
â”‚   â”‚
â”‚   â”œâ”€â”€ ğŸ“ css/
â”‚   â”‚   â”œâ”€â”€ ğŸ“„ common.css
â”‚   â”‚   â”œâ”€â”€ ğŸ“„ main.css
â”‚   â”‚   â”œâ”€â”€ ğŸ“„ login.css
â”‚   â”‚   â””â”€â”€ ğŸ“„ signup.css
â”‚   â”‚
â”‚   â”œâ”€â”€ ğŸ“ js/
â”‚   â”‚   â”œâ”€â”€ ğŸ“„ common.js
â”‚   â”‚   â”œâ”€â”€ ğŸ“„ main.js
â”‚   â”‚   â”œâ”€â”€ ğŸ“„ login.js
â”‚   â”‚   â””â”€â”€ ğŸ“„ signup.js
â”‚   â”‚
â”‚   â””â”€â”€ ğŸ“ images/
â”‚       â””â”€â”€ ğŸ–¼ï¸ jbj_logo.png
â”‚
â””â”€â”€ ğŸ“ logstash/                    # Logstash ì„¤ì • (ì„ íƒ)
    â”œâ”€â”€ ğŸ“ config/
    â”‚   â””â”€â”€ ğŸ“„ logstash.yml
    â””â”€â”€ ğŸ“ pipeline/
        â””â”€â”€ ğŸ“„ logstash.conf
```

## ğŸ”§ íŒŒì¼ë³„ ì„¤ëª…

### Backend (Python/FastAPI)

| íŒŒì¼ | ì„¤ëª… |
|------|------|
| `main.py` | FastAPI ì• í”Œë¦¬ì¼€ì´ì…˜ ì—”íŠ¸ë¦¬í¬ì¸íŠ¸, ë¼ìš°í„° ë“±ë¡ |
| `database.py` | Oracle DB ì—°ê²° ë° ì„¸ì…˜ ê´€ë¦¬ |
| `models.py` | SQLAlchemy ORM ëª¨ë¸ (Member, Level, Auth) |
| `schemas.py` | Pydantic ìŠ¤í‚¤ë§ˆ (ìš”ì²­/ì‘ë‹µ ê²€ì¦) |
| `auth.py` | JWT í† í° ìƒì„±/ê²€ì¦, ë¹„ë°€ë²ˆí˜¸ í•´ì‹± |
| `member_router.py` | íšŒì›ê°€ì…/ë¡œê·¸ì¸/ì¤‘ë³µì²´í¬ API |
| `email_router.py` | ì´ë©”ì¼ ì¸ì¦ API |

### Frontend (HTML/CSS/JS)

| íŒŒì¼ | ì„¤ëª… |
|------|------|
| `index.html` | ë©”ì¸ í˜ì´ì§€ |
| `login.html` | ë¡œê·¸ì¸ í˜ì´ì§€ |
| `signup.html` | íšŒì›ê°€ì… í˜ì´ì§€ |
| `common.css` | ê³µí†µ ìŠ¤íƒ€ì¼ (í—¤ë”, í‘¸í„°, ë„¤ë¹„ê²Œì´ì…˜) |
| `main.css` | ë©”ì¸ í˜ì´ì§€ ì „ìš© ìŠ¤íƒ€ì¼ |
| `login.css` | ë¡œê·¸ì¸ í˜ì´ì§€ ì „ìš© ìŠ¤íƒ€ì¼ |
| `signup.css` | íšŒì›ê°€ì… í˜ì´ì§€ ì „ìš© ìŠ¤íƒ€ì¼ |
| `common.js` | ê³µí†µ ìœ í‹¸ë¦¬í‹° (ì¸ì¦, API í˜¸ì¶œ) |
| `main.js` | ë©”ì¸ í˜ì´ì§€ ë¡œì§ |
| `login.js` | ë¡œê·¸ì¸ ë¡œì§ |
| `signup.js` | íšŒì›ê°€ì… ë¡œì§ |

### Docker & Infrastructure

| íŒŒì¼ | ì„¤ëª… |
|------|------|
| `Dockerfile` | FastAPI ì»¨í…Œì´ë„ˆ ì´ë¯¸ì§€ ë¹Œë“œ ì„¤ì • |
| `docker-compose.yml` | ì „ì²´ ìŠ¤íƒ ì˜¤ì¼€ìŠ¤íŠ¸ë ˆì´ì…˜ |
| `.env` | í™˜ê²½ ë³€ìˆ˜ (ì‹¤ì œ ê°’, git ignore) |
| `.env.example` | í™˜ê²½ ë³€ìˆ˜ í…œí”Œë¦¿ |
| `init.sql` | Oracle DB ì´ˆê¸°í™” SQL |

## ğŸš€ ì‹œì‘í•˜ê¸°

### 1. í•„ìˆ˜ ìš”êµ¬ì‚¬í•­

- Docker Desktop (ìµœì‹  ë²„ì „)
- Docker Compose (ìµœì‹  ë²„ì „)
- Git

### 2. í”„ë¡œì íŠ¸ í´ë¡ 

```bash
git clone <repository-url>
cd pp002JBJ_fastapi_web_oracle_es_py
```

### 3. í™˜ê²½ ë³€ìˆ˜ ì„¤ì •

`.env.example` íŒŒì¼ì„ `.env`ë¡œ ë³µì‚¬í•˜ê³  ì„¤ì •ì„ ìˆ˜ì •í•©ë‹ˆë‹¤:

```bash
cp .env.example .env
```

`.env` íŒŒì¼ì„ í¸ì§‘í•˜ì—¬ ì‹¤ì œ ê°’ìœ¼ë¡œ ë³€ê²½:

```env
# Database
DB_USER=jbj_user
DB_PASSWORD=jbj_pass123
DB_HOST=oracle-db
DB_PORT=1521
DB_SERVICE=XEPDB1

# JWT Secret (ìµœì†Œ 32ì ì´ìƒ)
SECRET_KEY=your-very-long-secret-key-at-least-32-characters-long

# Email (Gmail ì‚¬ìš© ì‹œ)
SMTP_USER=your_email@gmail.com
SMTP_PASSWORD=your_gmail_app_password

# Oracle Admin Password
ORACLE_PWD=OracleAdmin123
```

### 4. ì •ì  íŒŒì¼ ì¤€ë¹„

`static/images/` ë””ë ‰í† ë¦¬ì— ë¡œê³  ì´ë¯¸ì§€ë¥¼ ë°°ì¹˜:

```bash
mkdir -p static/images
# jbj_logo.png íŒŒì¼ì„ static/images/ í´ë”ì— ë³µì‚¬
```

### 5. Docker Compose ì‹¤í–‰

```bash
# ëª¨ë“  ì„œë¹„ìŠ¤ ì‹œì‘
docker-compose up -d
## ë¹Œë“œ ë° ì‹œì‘
#docker-compose up --build -d

# ë¡œê·¸ í™•ì¸
docker-compose logs -f fastapi-backend
#docker-compose logs -f oracle-db
#docker-compose logs -f elasticsearch
#docker-compose logs -f kibana
#docker-compose logs -f logstash
## ë¡œê·¸ í™•ì¸
#docker-compose logs -f
```

### 6. ë°ì´í„°ë² ì´ìŠ¤ ì´ˆê¸°í™”

(ì˜µì…˜1) Oracle ì»¨í…Œì´ë„ˆê°€ ì™„ì „íˆ ì‹œì‘ëœ í›„ (ì•½ 2-3ë¶„ ì†Œìš”):

```bash
# Oracle ì»¨í…Œì´ë„ˆ ì ‘ì†
docker exec -it jbj-oracle bash

 
# ë„ì»¤ bashì—ì„œ SQL*Plusë¡œ ì ‘ì†
sqlplus sys/YourSecurePassword123@//localhost:1521/XEPDB1 as sysdba

# ì‚¬ìš©ì ìƒì„±
CREATE USER jbj_user IDENTIFIED BY jbj_pass123;
GRANT CONNECT, RESOURCE, DBA TO jbj_user;
ALTER USER jbj_user QUOTA UNLIMITED ON USERS;

# ìƒì„±í•œ ì‚¬ìš©ìë¡œ ì ‘ì†
CONNECT jbj_user/jbj_pass123@//localhost:1521/XEPDB1

# init.sql ìŠ¤í¬ë¦½íŠ¸ ì‹¤í–‰
@/opt/oracle/scripts/startup/init.sql

# í™•ì¸
SELECT * FROM LEVELS;
```


(ì˜¶ì…˜2)
```bash
# ë˜ëŠ”, Oracle ì»¨í…Œì´ë„ˆê°€ ì™„ì „íˆ ì‹œì‘ëœ í›„[ì•½ê°„ ë‹¤ë¦„]:
docker exec -it jbj-oracle sqlplus sys/YourSecurePassword123@//localhost:1521/XEPDB1 as sysdba

# SQL*Plusì—ì„œ
CREATE USER jbj_user IDENTIFIED BY jbj_pass123;
GRANT CONNECT, RESOURCE, DBA TO jbj_user;
ALTER USER jbj_user QUOTA UNLIMITED ON USERS;
exit;

# ì‚¬ìš©ìë¡œ ì¬ì ‘ì†
docker exec -it jbj-oracle sqlplus jbj_user/jbj_pass123@//localhost:1521/XEPDB1

# init.sql ì‹¤í–‰
@/opt/oracle/scripts/startup/init.sql
exit;

```


(ì˜µì…˜3) í˜¹ì€ sqldeveloperì—ì„œ ì•„ë˜ ê²ƒë“¤ì„ ìˆ˜í–‰í•´ë„ ëœë‹¤.
```sqldeveloper

-- [ì—¬ê¸°ë¶€í„° 4ì¤„ ê´€ë¦¬ì ê³„ì •ì ‘ì†í•´ì„œ 'jbj_user'ê³„ì • ìƒì„±]
ALTER SESSION SET "_ORACLE_SCRIPT" = TRUE;
-- ê³„ì • ìƒì„±
CREATE USER jbj_user IDENTIFIED BY jbj_pass123;
-- ê¶Œí•œ ë¶€ì—¬
GRANT CONNECT, RESOURCE, CREATE VIEW TO jbj_user;
-- ê°ì²´ ìƒì„± ê³µê°„ í• ë‹¹ì„±
ALTER USER jbj_user DEFAULT TABLESPACE SYSTEM
QUOTA UNLIMITED ON SYSTEM;

-- ['jbj_user'ê³„ì • ì ’ì†í•˜ì—¬ init.sql ì‹¤í–‰]

```



### 7. ì• í”Œë¦¬ì¼€ì´ì…˜ ì ‘ì†

- **ë©”ì¸ í˜ì´ì§€**: http://localhost:8000
- **ë¡œê·¸ì¸ í˜ì´ì§€**: http://localhost:8000/login.html
- **íšŒì›ê°€ì… í˜ì´ì§€**: http://localhost:8000/signup.html
- **API ë¬¸ì„œ (Swagger)**: http://localhost:8000/docs
- **Kibana**: http://localhost:5601
- **Elasticsearch**: http://localhost:9200

## ğŸ§ª í…ŒìŠ¤íŠ¸ ì ˆì°¨

### 1. íšŒì›ê°€ì… í…ŒìŠ¤íŠ¸

1. http://localhost:8000/signup.html ì ‘ì†
2. ì´ë©”ì¼ ì…ë ¥ ë° ì¸ì¦ë²ˆí˜¸ ë°›ê¸°
3. ë°›ì€ ì¸ì¦ë²ˆí˜¸ ì…ë ¥ ë° ì¸ì¦
4. ë‚˜ë¨¸ì§€ í•„ìˆ˜ ì •ë³´ ì…ë ¥
5. "ê°€ì… í•˜ê¸°" ë²„íŠ¼ í´ë¦­
6. ì„±ê³µ ë©”ì‹œì§€ í™•ì¸ í›„ ë¡œê·¸ì¸ í˜ì´ì§€ë¡œ ì´ë™

### 2. ë¡œê·¸ì¸ í…ŒìŠ¤íŠ¸

1. http://localhost:8000/login.html ì ‘ì†
2. ê°€ì…í•œ ì´ë©”ì¼ê³¼ ë¹„ë°€ë²ˆí˜¸ ì…ë ¥
3. "ì•„ì´ë”” ì €ì¥" ì²´í¬ (ì„ íƒ)
4. "ë¡œê·¸ì¸" ë²„íŠ¼ í´ë¦­
5. ë©”ì¸ í˜ì´ì§€ë¡œ ë¦¬ë‹¤ì´ë ‰íŠ¸ í™•ì¸
6. í—¤ë”ì— ì‚¬ìš©ì ë‹‰ë„¤ì„ í‘œì‹œ í™•ì¸

### 3. API í…ŒìŠ¤íŠ¸ (Swagger ì‚¬ìš©)

http://localhost:8000/docs ì—ì„œ ë‹¤ìŒ API í…ŒìŠ¤íŠ¸:

- `POST /member/signup` - íšŒì›ê°€ì…
- `POST /member/login` - ë¡œê·¸ì¸
- `GET /member/dupcheck/email` - ì´ë©”ì¼ ì¤‘ë³µ ì²´í¬
- `GET /member/dupcheck/nickname` - ë‹‰ë„¤ì„ ì¤‘ë³µ ì²´í¬
- `GET /sendEmail/signup` - ì¸ì¦ ì´ë©”ì¼ ë°œì†¡
- `GET /sendEmail/checkAuthKey` - ì¸ì¦ë²ˆí˜¸ í™•ì¸

## ğŸ› ï¸ ë¬¸ì œ í•´ê²°

### Oracle ì»¨í…Œì´ë„ˆê°€ ì‹œì‘ë˜ì§€ ì•ŠëŠ” ê²½ìš°

```bash
# ì»¨í…Œì´ë„ˆ ë¡œê·¸ í™•ì¸
docker logs jbj-oracle

# í¬íŠ¸ ì¶©ëŒ í™•ì¸
lsof -i :1521

# ë³¼ë¥¨ ì´ˆê¸°í™” í›„ ì¬ì‹œì‘
docker-compose down -v
docker-compose up -d
```

### FastAPI ì»¨í…Œì´ë„ˆê°€ Oracleì— ì—°ê²°ë˜ì§€ ì•ŠëŠ” ê²½ìš°

```bash
# Oracle ì»¨í…Œì´ë„ˆ health check í™•ì¸
docker ps

# Oracle ì„œë¹„ìŠ¤ ì¤€ë¹„ í™•ì¸
docker exec jbj-oracle lsnrctl status

# FastAPI ì¬ì‹œì‘
docker-compose restart fastapi-backend
```

### ì´ë©”ì¼ ë°œì†¡ì´ ì•ˆ ë˜ëŠ” ê²½ìš°

Gmail ì‚¬ìš© ì‹œ:
1. Google ê³„ì • ë³´ì•ˆ ì„¤ì •ì—ì„œ "2ë‹¨ê³„ ì¸ì¦" í™œì„±í™”
2. "ì•± ë¹„ë°€ë²ˆí˜¸" ìƒì„±
3. ìƒì„±ëœ ì•± ë¹„ë°€ë²ˆí˜¸ë¥¼ `.env`ì˜ `SMTP_PASSWORD`ì— ì„¤ì •

## ğŸ“Š ëª¨ë‹ˆí„°ë§

### ì„œë¹„ìŠ¤ ìƒíƒœ í™•ì¸

```bash
# ëª¨ë“  ì»¨í…Œì´ë„ˆ ìƒíƒœ
docker-compose ps

# íŠ¹ì • ì„œë¹„ìŠ¤ ë¡œê·¸
docker-compose logs -f [service-name]

# ë¦¬ì†ŒìŠ¤ ì‚¬ìš©ëŸ‰
docker stats
```

### Elasticsearch í™•ì¸

```bash
# í´ëŸ¬ìŠ¤í„° ìƒíƒœ
curl http://localhost:9200/_cluster/health?pretty

# ì¸ë±ìŠ¤ ëª©ë¡
curl http://localhost:9200/_cat/indices?v
```

## ğŸ”„ ê°œë°œ í™˜ê²½ ì„¤ì •

ë¡œì»¬ì—ì„œ ê°œë°œí•˜ëŠ” ê²½ìš°:

```bash
# ê°€ìƒí™˜ê²½ ìƒì„±
python -m venv venv
source venv/bin/activate  # Windows: venv\Scripts\activate

# ì˜ì¡´ì„± ì„¤ì¹˜
pip install -r requirements.txt

# í™˜ê²½ ë³€ìˆ˜ ì„¤ì • í›„ ì‹¤í–‰
python main.py
```

## ğŸ“ ë‹¤ìŒ ë‹¨ê³„

ì´ë²ˆ ë‹¨ê³„ì—ì„œ êµ¬í˜„í•œ ê¸°ëŠ¥:
- âœ… íšŒì›ê°€ì…/ë¡œê·¸ì¸
- âœ… ì´ë©”ì¼ ì¸ì¦
- âœ… JWT í† í° ì¸ì¦
- âœ… ë©”ì¸ í˜ì´ì§€

ë‹¤ìŒ í¬íŒ… ì˜ˆì •:
- â³ ììœ ê²Œì‹œíŒ (CRUD)
- â³ ëŒ“ê¸€ ì‹œìŠ¤í…œ
- â³ ì¢‹ì•„ìš” ê¸°ëŠ¥
- â³ Elasticsearch ê²€ìƒ‰
- â³ AI ì±—ë´‡ í†µí•©

## ğŸ¤ ê¸°ì—¬

ë²„ê·¸ ë¦¬í¬íŠ¸ë‚˜ ê¸°ëŠ¥ ì œì•ˆì€ ì´ìŠˆë¡œ ë“±ë¡í•´ì£¼ì„¸ìš”.

## ğŸ“„ ë¼ì´ì„ ìŠ¤

MIT License
